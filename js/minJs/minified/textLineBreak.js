"use strict";function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,l=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return l=e.done,e},e:function(e){o=!0,r=e},f:function(){try{l||null==i.return||i.return()}finally{if(o)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}define(["jquery"],function(e){console.log("Line break initialized !"),myObject=new(function(){function n(e){_classCallCheck(this,n);var t=this;this.breakRegExp=/-break|-endln|-stron|\/stron|-itali|\/itali|-under|\/under|-stnit|\/stnit/gim,this.indexes=[],this.contentSpot=e,this.buttonToAttachEvent=document.getElementById("formatText"),this.cl("this.buttonToAttachEvent ",this.buttonToAttachEvent),this.buttonToAttachEvent.addEventListener("click",function(e){t.initiateFormatting()})}return _createClass(n,[{key:"cl",value:function(e,t){return null==t||""===t?function(e){return console.log("%c "+e,"font-size: 16px; font-weight: bold; color: lightcoral;")}:console.log("%c "+e,"font-size: 16px; font-weight: bold; color: lightseagreen;",t)}},{key:"grabValue",value:function(e){var t=this,n=this.contentSpot;console.log("_textBlock within grabValue() ",n);var i=this,r="",l="",o="";return null==e?(r=document.querySelector(n),console.log("_textBlock within grabValue nested function",n),t.cl("$domTextBlock ",r)):(r=document.querySelectorAll(e),t.cl()("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"),t.cl()("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"),t.cl("$domTextBlock ELSE ",r),t.cl()("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"),t.cl()("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"),console.log("_textBlock within grabValue nested function referenceElem",n)),t.cl()("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"),l=r.children?r.lastChild:r,console.log("domTextBlockVerifier ",l),null!=l||null!=l||l.length?(t.cl("domTextBlockVerifier ",l),r.children?(console.log("**********************************************$domTextBlock IF ",r.classList),t.cl("$domTextBlock LAST CHILD IF BEFORE",r.lastChild),t.cl("$domTextBlock lastchildren IF AFTER",r.lastChild.children),t.cl("$domTextBlock lastchildren [2] IF AFTER",r.lastChild.children[2]),t.cl("$domTextBlock lastchildren [2] textContent IF AFTER",r.lastChild.children[2].textContent),t.cl("$domTextBlock lastchildren [2] innerText IF AFTER",r.lastChild.children[2].innerText),t.cl("$domTextBlock lastchildren [2] innerHTML IF AFTER",r.lastChild.children[2].innerHTML),o=[].slice.call(r.lastChild.children),r=o.map(function(e){var t=[];return e.classList.contains("arrayKlass")||e.classList.contains("levelsClass")?(i.cl("IF domElements from $domTextBlock.lastChild.children element ",e),t.push(e)):i.cl("ELSE domElements from $domTextBlock.lastChild.children element ",e),t}),i.cl("domTextBlock ",r),r=t.convertArrayToTextBlock(r)):(console.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ $domTextBlock else ",r.classList),r=r,console.log("$domTextBlock else AFTER",r))):t.cl()("Doesn't have children"),r}},{key:"convertArrayToTextBlock",value:function(e){if("object"===_typeof(e)){var t="";for(var n in e)this.cl("elemToConvert ",e[n][0]),this.cl("Key ",n),e[n].length&&(t+=e[n][0].textContent);return t}}},{key:"performTreatment",value:function(e){return this.textBlockChildren=e,this.textTreatedCompletely="",this.treatedTestArray=[],console.log("textblockchildren ************************** ",this.textBlockChildren),console.log("textblockchildren substring ************************** ",this.textBlockChildren.substring(0,15)),this.textBlockChildren.length?(console.log("****************************** text block children: ",this.textBlockChildren.substring(0,50)),this.treatedTestArray=this.indicesFinder(this.textBlockChildren),this.cl("@+@+@+@+@+@+@+@+@+@+@+@+@+@ Value returned: ",this.treatedTestArray),this.textTreatedCompletely=this.treatTextCompletely(this.treatedTestArray,this.textBlockChildren),this.cl("this.textTreatedCompletely",this.textTreatedCompletely)):console.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ textBlockChildren.length is less than 0: ",this.textBlockChildren.length),this.treatedTestArray}},{key:"treatTextCompletely",value:function(e,t){var n;this.cl()("treatTextCompletely method was just invoked"),this.cl("indicesAsObjs @@@@@@@@@@@@@&&&&&&&&XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",e),this.cl("indicesAsObjs @@@@@@@@@@@@@&&&&&&&&XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",e.breaks),this.cl("indicesAsObjs @@@@@@@@@@@@@&&&&&&&&XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",e.breaks[0].index),this.indexMarker=0,this.textToRender={tagOpenedUsed:'<div class="line-treated inline">',tagOpenedBreak:'<div class="line-treated break">',tagOpenedStrong:'<div class="line-treated inline strong">',tagOpenedItalic:'<div class="line-treated inline italic">',tagOpenedUnderline:'<div class="line-treated inline underline">',tagClosedUsed:"</div>",lines:[]};var i="";for(n in e){this.cl("current key in for loop",n);for(var r=0;r<e.breaks.length;r++)this.cl("indicesAsObjs breaks' length ",e.breaks.length),this.cl("indicesAsObjs breaks' value ",e.breaks[r].index),this.cl("indicesAsObjs breaks' value ",e.breaks[r].tag),i=r,this.cl("malleableJ ",i),i=i<=0?0:i-1,this.cl("malleableJ AFTER ",i),this.cl("this.textToRender.lines",this.textToRender.lines),console.log(this.textToRender.lines),0===r&&"-break"!==e.breaks[r]?(this.cl("XXXXXXXX-------XXXXXX------ This is logging J when this is 0",r+" "+e.breaks[r]),this.textToRender.lines.push(this.textToRender.tagOpenedUsed.trim()+t.substring(this.indexMarker,e.breaks[r].index).trim()+this.textToRender.tagClosedUsed.trim())):"strong"===e.breaks[i].tag&&"strong"===e.breaks[r].tag?this.textToRender.lines.push(this.textToRender.tagOpenedStrong.trim()+t.substring(this.indexMarker,e.breaks[r].index).trim()+this.textToRender.tagClosedUsed.trim()):"italic"===e.breaks[i].tag&&"italic"===e.breaks[r].tag?this.textToRender.lines.push(this.textToRender.tagOpenedItalic.trim()+t.substring(this.indexMarker,e.breaks[r].index).trim()+this.textToRender.tagClosedUsed.trim()):"underline"===e.breaks[i].tag&&"underline"===e.breaks[r].tag?this.textToRender.lines.push(this.textToRender.tagOpenedUnderline.trim()+t.substring(this.indexMarker,e.breaks[r].index).trim()+this.textToRender.tagClosedUsed.trim()):"break"===e.breaks[r].tag?this.textToRender.lines.push(this.textToRender.tagOpenedBreak.trim()+t.substring(this.indexMarker,e.breaks[r].index).trim()+this.textToRender.tagClosedUsed.trim()):this.textToRender.lines.push(this.textToRender.tagOpenedUsed.trim()+t.substring(this.indexMarker,e.breaks[r].index).trim()+this.textToRender.tagClosedUsed.trim()),this.cl("indexMarker's value AFTER assignemnt BREAKS",this.indexMarker),this.indexMarker=e.breaks[r].index+6}return this.render(this.textToRender)}},{key:"render",value:function(e){this.cl()("render was invoked"),this.contentThatWilChange=this.grabValue(this.contentSpot+' div[class^="textBlockWrapper-"]:last-child .arrayKlass'),this.contentThatWillBeRemoved=this.grabValue(this.contentSpot+' div[class^="textBlockWrapper-"]:last-child .levelsClass'),this.cl("contentThatWillBeRemoved ",this.contentThatWillBeRemoved),this.elemToRenderLSize=e.lines.length,this.contentThatWilChange=this.contentThatWilChange[0],this.contentThatWilChange.innerHTML="";for(var t=0;t<this.contentThatWillBeRemoved.length;t++)this.contentThatWillBeRemoved[t].remove();for(var n=0;n<this.elemToRenderLSize;n++)this.contentThatWilChange.innerHTML=this.contentThatWilChange.innerHTML+e.lines[n];return this}},{key:"indicesFinder",value:function(e){console.log("indicesFinder was invoked");this.cl("Text to search into",e);var t=e.match(this.breakRegExp).slice(","),n=[];console.log("textToSearchInto ",e.substring(0,20)),console.log("LoopingTimes ",t);for(var i=0;i<e.length;i++)this.cl("Text to search into length ",e.length),e[i]+e[i+1]+e[i+2]=="-br"||e[i]+e[i+1]+e[i+2]+e[i+3]=="-end"?n.push({index:i,tag:"break"}):e[i]+e[i+1]+e[i+2]=="-st"||e[i]+e[i+1]+e[i+2]+e[i+3]=="/str"?n.push({index:i,tag:"strong"}):e[i]+e[i+1]+e[i+2]=="-it"||e[i]+e[i+1]+e[i+2]+e[i+3]=="/ita"?n.push({index:i,tag:"italic"}):e[i]+e[i+1]+e[i+2]=="-un"||e[i]+e[i+1]+e[i+2]+e[i+3]=="/und"?n.push({index:i,tag:"underline"}):e[i]+e[i+1]+e[i+2]===void 0||e[i]+e[i+1]+e[i+2]===null||(e[i],e[i+1],e[i+2]);return{breaks:n}}},{key:"initiateFormatting",value:function(){console.log("initiateFormatting() was invoked ");var e,t=this;this.contentSpot;this.contentToAnalyse=this.grabValue(),this.cl("this.contentToAnalyse ",_typeof(this.contentToAnalyse)),this.cl("this.contentToAnalyse ",this.contentToAnalyse),e=void 0===t.contentToAnalyse.textContent||null===t.contentToAnalyse.textContent?t.contentToAnalyse:t.contentToAnalyse.textContent.trim(),this.cl("onlyTextFromBlock ",e),""!=e?(this.cl()("onlyTextFromBlock ELSE"),t.performTreatment(e)):this.cl()("onlyTextFromBlock IF")}},{key:"domObserver",value:function(e){console.log("MutationObserver is working sound!!!");e=this.contentSpot,this.contentToAnalyse=this.grabValue(),console.log("Inside MO, looking for grabValueFromDom method's return ",this.contentToAnalyse.classList[0]),this.targetNode=document.querySelector(e),this.config={attributes:!0,childList:!0,subtree:!0}}}]),n}())(".contentSpot")});